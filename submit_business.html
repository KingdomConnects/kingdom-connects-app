<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Submit Your Business</title>
  <link rel="stylesheet" href="styles/style.css" />
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getFirestore,
      collection,
      getDocs,
      doc,
      getDoc,
      addDoc
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "kingdom-commerce",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.addEventListener("DOMContentLoaded", async () => {
  const churchDropdown = document.getElementById("church");
  const churchSnapshot = await getDocs(collection(db, "churches"));
  churchSnapshot.forEach(doc => {
    const option = document.createElement("option");
    option.value = doc.id;
    option.textContent = doc.data().name;
    churchDropdown.appendChild(option);
  });
});

window.handleSubmit = async function(event) {
  event.preventDefault();
  const status = document.getElementById("status");
  status.textContent = "";
  const form = event.target;

  const data = {
    business_name: form.business_name.value,
    name: form.name.value,
    email: form.email.value,
    description: form.description.value,
    phone: form.phone.value,
    website: form.website.value,
    address_line1: form.address1.value,
    address_line2: form.address2.value,
    city: form.city.value,
    state: form.state.value,
    zip_code: form.zip.value,
    church: form.church.value,
    created_at: new Date().toISOString()
  };

  console.log("Submitting data:", data);

  const churchRef = doc(db, "churches", data.church);
  const churchSnap = await getDoc(churchRef);
  if (!churchSnap.exists()) {
    status.textContent = "Error: Selected church does not exist.";
    status.className = "error";
    return;
  }

  try {
    await addDoc(collection(db, "business_listings"), data);
    status.textContent = "Business submitted successfully!";
    status.className = "success";
    form.reset();
  } catch (error) {

